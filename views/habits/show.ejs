<%- include('../partials/header') %>

<!------------------- HABIT INFO ------------------->
<section id="show-page">
    <h1><%= habit.habit %></h1>
    <div>Category: <%= habit.category %></div>
    <form action="/habits/<%= habit._id %>/?_method=DELETE" method="POST">
        <button class="delete-btn" type="submit">Delete</button>
    </form>
    <a href="/habits/<%= habit._id %>/edit">Edit</a>
</section>

<br>
<br>


<!------------------- HABIT LOG FORM ------------------->
<h3>Habit Log</h3>
<form id="habit-log-form" method="POST" action="/habits/<%= habit._id %>/logs">
    <div class="form-text">
        <!-- <label for="input-notes"></label> -->
        <textarea class="form-control" rows="3" name="note" placeholder="Any notes?"></textarea>
    </div>    
    <br>
        <button type="submit" class="btn btn-success">Mark Complete</button>
</form>
<br>
<br>

<!------------------- HABIT LOG TABLE ------------------->
<% if (habit.habitLog.length) { %>
    <table>
        <thead>
            <tr>
                <th>Date:</th>
                <th>Completed:</th>
                <th>Notes:</th>
            </tr>
        </thead>
        <tbody>
            <% habit.habitLog.forEach(function(h){ %> 
                <tr>
                    <td><%= h.createdAt.toLocaleDateString() %> </td>
                    <td><%= h.complete %></td>
                    <td><%= h.note %></td>
                </tr>
            <%}); %> 
        </tbody>
    </table>

<% } else { %> 
    <h5>No logs yet</h5>    
<% } %>  

<%- include('../partials/footer') %>