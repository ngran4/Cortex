<%- include('../partials/header') %>

<div class="container"></div>
  <div class="row gx-5">
<!------------------- HABIT INFO ------------------->
    <div class="col-md-5">
      <section id="show-page">
        <h1 id="habit"><%= habit.habit %></h1>
        <h4 id="cat">Category: <%= habit.category %></h4>
        <br>
        <form action="/habits/<%= habit._id %>/?_method=DELETE" method="POST">
            <button id="delete-btn" class="btn btn-outline-danger btn-sm" type="submit">Delete</button>
        </form>
        <a id="edit-btn" class="btn btn-outline-secondary btn-sm" href="/habits/<%= habit._id %>/edit">Edit</a>
      </section>
      <br><br>
<!------------------- HABIT LOG FORM ------------------->
      <h3>Habit Log</h3>
      <form id="habit-log-form" method="POST" action="/habits/<%= habit._id %>/logs">
          <div class="form-text">
              <!-- <label for="input-notes"></label> -->
              <textarea class="form-control" rows="3" name="note" placeholder="Any notes?"></textarea>
          </div>    
          <br>
              <button type="submit" class="btn btn-success">Mark Complete</button>
      </form>
    </div>
<!------------------- HABIT LOG TABLE ------------------->    
    <div class="col-md-7">
      <% if (habit.habitLog.length) { %>
        <table id="show-tbl" class="table">
            <thead>
                <tr>
                    <th scope="col">Date:</th>
                    <th scope="col">Notes:</th>
                </tr>
            </thead>
            <tbody>
                <% habit.habitLog.forEach(function(h){ %> 
                    <tr>
                        <td scope="row"><%= h.createdAt.toLocaleDateString() %> </td>
                        <td scope="row"><%= h.note %></td>
                    </tr>
                <%}); %> 
            </tbody>
        </table>
  
    <% } else { %> 
        <h5>No logs yet</h5>    
    <% } %>  
    </div>
  </div>


<!------------------- HABIT LOG TABLE ------------------->
  <!-- <% if (habit.habitLog.length) { %>
      <table>
          <thead>
              <tr>
                  <th>Date:</th>
                  <th>Completed:</th>
                  <th>Notes:</th>
              </tr>
          </thead>
          <tbody>
              <% habit.habitLog.forEach(function(h){ %> 
                  <tr>
                      <td><%= h.createdAt.toLocaleDateString() %> </td>
                      <td><%= h.complete %></td>
                      <td><%= h.note %></td>
                  </tr>
              <%}); %> 
          </tbody>
      </table>

  <% } else { %> 
      <h5>No logs yet</h5>    
  <% } %>   -->
</div>

<%- include('../partials/footer') %>